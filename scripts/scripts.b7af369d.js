"use strict";angular.module("hackmanApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngQueryBuilder"]).config(["$routeProvider",function(a){a.when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/license",{templateUrl:"views/license.html",controller:"LicenseCtrl",controllerAs:"license"}).when("/license/add",{templateUrl:"views/add-license.html",controller:"AddLicenseCtrl",controllerAs:"addLicense"}).when("/search",{templateUrl:"views/search.html",controller:"SearchCtrl",controllerAs:"search"}).otherwise({redirectTo:"/search"})}]),angular.module("hackmanApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("hackmanApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("hackmanApp").directive("dropdown",function(){return{template:'<div></div></div><select id="size" style="width: 100%;" ><option>S - 6 3/4"</option><option>M - 7 1/4"</option><option>L - 7 1/8"</option><option>XL - 7 5/8"</option></select><div id="grid"></div>',restrict:"E",link:function(a,b,c){var d=$(b).find("#grid");d.kendoGrid({selectable:"multiple cell",allowCopy:!0,columns:[{field:"productName"},{field:"category"}],dataSource:[{productName:"Tea",category:"Beverages"},{productName:"Coffee",category:"Beverages"},{productName:"Ham",category:"Food"},{productName:"Bread",category:"Food"}]}),$(b).find("#size").kendoDropDownList({select:function(b){var c=b.item,e=c.text();d.data("kendoGrid").dataSource.add({productName:e,category:e}),a.$apply(function(){})}})}}}),angular.module("hackmanApp").controller("LicenseCtrl",["$http",function(a){this.model={name:"URLF",categories:[{name:"Category Replacement Kit",features:["Feature 1","Feature 10"]},{name:"Web Security Setting ID",features:["Feature 2","Feature 20"]}]},this.send=function(){a.post("/api/license",{license:"created-from-features"},function(a){console.log("great success"),this.status="great success"},function(a){})}}]),angular.module("hackmanApp").controller("AddLicenseCtrl",function(){this.configuration=[{name:"AS",addons:["AV","VOD"],caption:"Service Success Factor",templates:["Detection","Performance"]},{name:"URL",addons:[],caption:"Category Replacement Kit",templates:["Default","Custom"]}],this.serviceOptions=_.map(this.configuration,function(a){return a.name}),this.onSelectedService=function(a){var b=_.find(this.configuration,function(b){return b.name===a});this["new"]={configuration:a,templates:b.templates,caption:b.caption}},this.onSelectedTemplate=function(a){this["new"].ready=!0,this["new"].template=a},this.create=function(){this.created=!0,this.status="Created "+this["new"].configuration+" with template "+this["new"].template+"!"}}),angular.module("hackmanApp").directive("chooseService",function(){return{scope:{model:"="},template:'<input id="service-chooser" />',restrict:"E",link:function(a,b,c){$(b).find("#service-chooser").kendoDropDownList({optionLabel:"Please choose services",dataSource:{data:a.model.serviceOptions},select:function(b){var c=b.item,d=c.text();a.$apply(function(){a.model.onSelectedService(d)})}})}}}),angular.module("hackmanApp").directive("chooseTemplate",function(){return{scope:{model:"="},templateUrl:"views/choose-template.html",restrict:"E",link:function(a,b,c){a.onChange=function(b){a.model.onSelectedTemplate(b)}}}}),angular.module("hackmanApp").controller("SearchCtrl",function(){this.search=function(){this.query=JSON.stringify(this.options.query),this.results=[{customer:"Trustwave",licenseName:"test",licenseKey:"76987a69sa8s6987",service:"CASB",active:!0,expires:"2016-12-31"},{customer:"Mail2World",licenseName:"some_other",licenseKey:"lkdjhsfkjhl35kjh34l5kh",service:"URLF",active:!1,expires:"2015-12-31"}]},this.clear=function(){this.options={fields:[{name:"Customer name",value:"customer_name"},{name:"Service",value:"service"},{name:"Type",value:"type"},{name:"Key number",value:"key_number"}],operators:[{name:"AND",value:"$and"},{name:"OR",value:"$or"}],conditions:[{name:"equal",value:"$eq"},{name:"is not equal",value:"$neq"},{name:"less than",value:"$lt"},{name:"less than or equal",value:"$lte"},{name:"greater than",value:"$gt"},{name:"greater than or equal",value:"$gte"}]}},this.clear()}),angular.module("hackmanApp").directive("chooseSearchOption",function(){return{scope:{model:"=",options:"="},template:'<input class="chooser" />',restrict:"E",link:function(a,b,c){$(b).find(".chooser").kendoDropDownList({optionLabel:c.label,dataSource:{data:a.options},select:function(b){var d=b.item,e=d.text();a.$apply(function(){a.model.onSelected(c.type,e)})}})}}}),angular.module("hackmanApp").directive("searchResults",function(){return{scope:{results:"="},template:'<div id="search-result-grid">',restrict:"E",link:function(a,b,c){a.$watch("results",function(){var c=$(b).find("#search-result-grid");c.kendoGrid({selectable:"multiple cell",allowCopy:!0,columns:[{field:"customer",title:"Customer"},{field:"licenseName",title:"License Name"},{field:"licenseKey",title:"License Key"},{field:"service",title:"Service"},{field:"active",title:"Active"},{field:"expires",title:"Expires"}],dataSource:a.results})})}}}),angular.module("hackmanApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/add-license.html",'<div> <div class="row my-row"> <div class="col-md-6"> <choose-service model="addLicense"> </div> <div class="col-md-6" ng-show="addLicense.new"> <choose-template model="addLicense"> </div> </div> <div class="row my-row"> <div class="col-md-6"> <button type="button" class="btn btn-default" ng-disabled="!addLicense.new.ready" ng-click="addLicense.create()">Create!</button> </div> <div class="col-md-6" ng-show="addLicense.created"> {{addLicense.status}} </div> </div> </div>'),a.put("views/choose-template.html",'<div class="row"> <div ng-repeat="template in model.new.templates" class="col-md-6"> <label> <input type="radio" ng-model="selected.name" value="template" name="template" ng-change="onChange(template)"> {{template}} </label> </div> </div>'),a.put("views/license.html",'<div> <h1>{{license.model.name}}</h1> <div ng-repeat="category in license.model.categories"> <h2>{{category.name}}</h2> <div ng-repeat="feature in category.features"> {{feature}} </div> </div> <button type="button" ng-click="license.send()">Create!</button> </div>'),a.put("views/main.html",'<div class="jumbotron"> <h1>First Kendo Component!</h1> <dropdown> </div>'),a.put("views/search.html",'<div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title">Search Options</h3> </div> <div class="panel-body"> <div query-builder="search.options"></div> <div class="pull-right"> <button class="btn btn-default" ng-click="search.search()">Search</button> <button class="btn btn-default" ng-click="search.clear()">Clear</button> </div> </div> </div> <div> <search-results results="search.results"> </div> <div> <pre>{{search.query}}</pre> </div>')}]);